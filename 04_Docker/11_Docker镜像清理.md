“悬空镜像”（dangling images）和“未被使用的镜像”（unused images）在 Docker 中是两个相关但不同的概念，理解它们的区别对有效管理镜像资源非常重要。

------

### ✅ 1. **悬空镜像（Dangling Images）**

**定义**：
 悬空镜像是指**没有标签（tag）且没有被任何容器引用**的镜像。

**产生原因**：

- 当你重新构建一个已有名字的镜像时（如 `docker build -t myapp:latest .`），旧的镜像会失去标签，变成悬空状态。
- `docker pull` 更新一个已有镜像时，旧版本也会变成悬空镜像。

**特点**：

- `REPOSITORY` 和 `TAG` 显示为 `<none>:<none>`
- 无法通过名称引用，只能通过 `IMAGE ID` 操作
- 已经“无主”，通常可以安全删除

**查看悬空镜像**：

```bash
docker images --filter "dangling=true"
```

**示例输出**：

```bash
REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
<none>       <none>    abc123def456   2 hours ago    120MB
```

------

### ✅ 2. **未被使用的镜像（Unused Images）**

**定义**：
 未被使用的镜像是指**没有被任何正在运行或已创建的容器所引用**的镜像，**无论是否有标签**。

**包含内容**：

- 所有悬空镜像（dangling）
- 所有有标签但未被任何容器使用的镜像

**举例说明**： 你有镜像 `nginx:1.20`，但当前没有任何容器基于它创建或运行，那么它就是“未被使用”的，但它**不是悬空的**（因为它有标签）。

------

### 🔍 对比总结

| 特性           | 悬空镜像（Dangling）      | 未被使用的镜像（Unused）            |
| -------------- | ------------------------- | ----------------------------------- |
| 是否有标签     | ❌ 没有（`<none>:<none>`） | ✅ 可能有标签                        |
| 是否被容器引用 | ❌ 没有被任何容器使用      | ❌ 没有被任何容器使用                |
| 是否可删除     | ✅ 通常可以安全删除        | ✅ 可以删除，但需确认是否还需要      |
| 范围           | 是“未被使用镜像”的子集    | 包含悬空镜像 + 有标签但未使用的镜像 |

------

### 🛠️ 清理命令对应关系

| 命令                     | 清理内容                                              |
| ------------------------ | ----------------------------------------------------- |
| `docker image prune`     | 仅清除 **悬空镜像**                                   |
| `docker image prune -a`  | 清除 **所有未被使用的镜像**（包括有标签但未使用的）   |
| `docker system prune`    | 清除悬空镜像 + 停止的容器 + 未用网络等                |
| `docker system prune -a` | 清除所有未被使用的镜像（等价于 `prune -a`）+ 其他资源 |

------

### ✅ 建议操作流程

1. 查看当前镜像使用情况：

   ```bash
   docker system df
   ```

2. 查看悬空镜像：

   ```bash
   docker images --filter "dangling=true"
   ```

3. 安全清理悬空镜像（推荐先用这个）：

   ```bash
   docker image prune
   ```

4. 如果磁盘空间紧张，再考虑清理所有未使用镜像：

   ```bash
   docker image prune -a
   ```